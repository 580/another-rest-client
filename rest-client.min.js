!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RestClient=t():e.RestClient=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){var t="";for(var n in e)t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])+"&";return t.substr(0,t.length-1)}function i(e,t,n,r){var o=r?r:function(t){var n={};for(var r in o._resources){var u=i(e,r,o.url(t,!1));u._resources=o._resources[r]._resources,n[r]=u,u.get=function(){var n="";return!t||t instanceof Object?(n=o.url(),t&&(n+="?"+s(t))):n=o.url(t),e._request("GET",n)},u.upd=function(n){var r=arguments.length<=1||void 0===arguments[1]?e._opts.contentType:arguments[1];return e._request("PUT",o.url(t),n,r)},u.del=function(){return e._request("DELETE",o.url(t))}}return n};return o._resources={},o.res=function(t){var n=arguments.length<=1||void 0===arguments[1]?e._opts.shortcut:arguments[1],r=[].concat(t),s=[],u=!0,c=!1,a=void 0;try{for(var f,l=r[Symbol.iterator]();!(u=(f=l.next()).done);u=!0){var p=f.value,d=o._resources[p]||i(e,p,o.url(void 0,!1));o._resources[p]=d,n&&(o[p]=d),s.push(d)}}catch(v){c=!0,a=v}finally{try{!u&&l["return"]&&l["return"]()}finally{if(c)throw a}}return t instanceof Array?s:s[0]},o.url=function(r){var o=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],s=n;return t&&(s+="/"+t),void 0!==r&&(s+="/"+r),o&&(s+=e._opts.trailing),s},o.add=function(t){var n=arguments.length<=1||void 0===arguments[1]?e._opts.contentType:arguments[1];return e._request("POST",o.url(),t,n)},o}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),a=r(c),f=function(){function e(t,n){o(this,e),this.host=t,this._resources={},this.conf(n),new a["default"](this),i(this,"","",this)}return u(e,[{key:"conf",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this._opts=this._opts||{trailing:"",shortcut:!0,contentType:"application/json",encoders:{"application/x-www-form-urlencoded":s,"application/json":JSON.stringify},decoders:{"application/json":JSON.parse}};for(var t in this._opts)t in e&&(this._opts[t]=e[t])}},{key:"_request",value:function(e,t){var n=this,r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],o=arguments.length<=3||void 0===arguments[3]?null:arguments[3],s=new XMLHttpRequest;if(s.open(e,this.host+t,!0),o){var i=this._opts.encoders[o];i&&(r=i(r)),s.setRequestHeader("Content-Type",o)}this.emit("request",s);var u=new Promise(function(e,t){s.onreadystatechange=function(){if(4==s.readyState)if(n.emit("answer",s),200==s.status||201==s.status||204==s.status){n.emit("success",s);var r=s.getResponseHeader("Content-Type"),o=n._opts.decoders[r],i=s.responseText;o&&(i=o(i)),e(i)}else n.emit("error",s),t(s)}});return s.send(r),u}}]),e}();e.exports=f},function(e,t){e.exports=function(e){var t={},n=[];e=e||this,e.on=function(e,n,r){(t[e]=t[e]||[]).push([n,r])},e.off=function(e,r){e||(t={});for(var o=t[e]||n,s=o.length=r?o.length:0;s--;)r==o[s][0]&&o.splice(s,1)},e.emit=function(e){for(var r,o=t[e]||n,s=o.length>0?o.slice(0,o.length):o,i=0;r=s[i++];)r[0].apply(r[1],n.slice.call(arguments,1))}}}])});
//# sourceMappingURL=rest-client.min.js.map