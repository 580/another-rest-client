{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 13e1233db2a14af2ec79","webpack:///./src/rest-client.js","webpack:///./~/minivents/dist/minivents.commonjs.min.js"],"names":[],"mappings":"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","file":"rest-client.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RestClient\"] = factory();\n\telse\n\t\troot[\"RestClient\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 13e1233db2a14af2ec79\n **/","import Events from 'minivents'\n\nfunction encodeUrl(data) {\n    let res = '';\n    for (let k in data)\n        res += encodeURIComponent(k) + '=' + encodeURIComponent(data[k]) + '&';\n    return res.substr(0, res.length - 1);\n}\n\nclass RestClient {\n    constructor(host, options) {\n        this.host = host;\n        this._resources = {};\n\n        this.conf(options);\n        new Events(this);\n\n        resource(this, '', '', this);\n    }\n\n    conf(options={}) {\n        this._opts = this._opts || {\n            trailing: '',\n            shortcut: true,\n            contentType: 'application/json',\n            encoders: {\n                'application/x-www-form-urlencoded': encodeUrl,\n                'application/json': JSON.stringify\n            },\n            decoders: {\n                'application/json': JSON.parse\n            }\n        };\n\n        for (let k in this._opts) {\n            if (k in options)\n                this._opts[k] = options[k];\n        }\n    }\n\n    _request(method, url, data=null, contentType=null) {\n        let xhr = new XMLHttpRequest();\n        xhr.open(method, this.host + url, true);\n\n        if (contentType) {\n            let encoder = this._opts.encoders[contentType];\n            if (encoder)\n                data = encoder(data);\n            xhr.setRequestHeader('Content-Type', contentType);\n        }\n\n        this.emit('request', xhr);\n\n        let p = new Promise((resolve, reject) => {\n            xhr.onreadystatechange = () => {\n                if (xhr.readyState == 4) {\n                    this.emit('answer', xhr);\n                    if (xhr.status == 200 || xhr.status == 201 || xhr.status == 204) {\n                        this.emit('success', xhr);\n\n                        let responseContentType = xhr.getResponseHeader('Content-Type');\n                        let decoder = this._opts.decoders[responseContentType];\n                        let res = xhr.responseText;\n                        if (decoder)\n                            res = decoder(res);\n\n                        resolve(res);\n                    } else {\n                        this.emit('error', xhr);\n                        reject(xhr);\n                    }\n                }\n            };\n        });\n        xhr.send(data);\n        return p;\n    }\n}\n\nfunction resource(client, name, baseUrl, ctx) {\n    let self = ctx ? ctx : (id) => {\n        let res = {};\n        for (let resName in self._resources) {\n            let r = resource(client, resName, self.url(id, false));\n            r._resources = self._resources[resName]._resources;\n            res[resName] = r;\n\n            r.get = () => {\n                let url = '';\n                if (!id || id instanceof Object) {\n                    url = self.url();\n                    if (id)\n                        url += '?' + encodeUrl(id);\n                } else {\n                    url = self.url(id);\n                }\n                return client._request('GET', url);\n            };\n\n            r.upd = (data, contentType=client._opts.contentType) => {\n                return client._request('PUT', self.url(id), data, contentType);\n            };\n\n            r.del = () => {\n                return client._request('DELETE', self.url(id));\n            };\n        }\n        return res;\n    };\n\n    self._resources = {};\n\n    self.res = (resourceName, shortcut=client._opts.shortcut) => {\n        let resourceArray = [].concat(resourceName);\n        let results = [];\n        for (let resName of resourceArray) {\n            let r = self._resources[resName] || resource(client, resName, self.url(undefined, false));\n            self._resources[resName] = r;\n            if (shortcut)\n                self[resName] = r;\n            results.push(r);\n        }\n        if (resourceName instanceof Array)\n            return results;\n        return results[0];\n    };\n\n    self.url = (id, final=true) => {\n        let url = baseUrl;\n        if (name)\n            url += '/' + name;\n        if (id !== undefined)\n            url += '/' + id;\n        if (final)\n            url += client._opts.trailing;\n        return url;\n    };\n\n    self.add = (data, contentType=client._opts.contentType) => {\n        return client._request('POST', self.url(), data, contentType);\n    };\n    return self;\n}\n\nmodule.exports = RestClient;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rest-client.js\n **/","module.exports=function(n){var t={},e=[];n=n||this,n.on=function(n,e,l){(t[n]=t[n]||[]).push([e,l])},n.off=function(n,l){n||(t={});for(var o=t[n]||e,i=o.length=l?o.length:0;i--;)l==o[i][0]&&o.splice(i,1)},n.emit=function(n){for(var l,o=t[n]||e,i=o.length>0?o.slice(0,o.length):o,c=0;l=i[c++];)l[0].apply(l[1],e.slice.call(arguments,1))}};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/minivents/dist/minivents.commonjs.min.js\n ** module id = 1\n ** module chunks = 0 1\n **/"],"sourceRoot":""}